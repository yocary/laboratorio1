<div class="card-body">
    <mat-card-title class="titulo">Bandeja centralizador</mat-card-title>

    <button mat-raised-button class="botones margenBotones" type="button" (click)="cerrarSesion()">Cerrar Sesion  <span class="material-icons">arrow_back</span></button>

    <div class="mat-elevation-z8 mt-2">
        <table mat-table [dataSource]="dataSource" id="tablaDatos">
            <!-- Columna codigo solicitud -->
            <ng-container matColumnDef="codigo_solicitud">
                <th mat-header-cell *matHeaderCellDef class="header-table">Codigo solicitud</th>
                <td mat-cell *matCellDef="let dato"> {{dato.codigo_solicitud}} </td>
            </ng-container>

            <!-- Columna Numero expediente-->
            <ng-container matColumnDef="no_expediente">
                <th mat-header-cell *matHeaderCellDef class="header-table">Numero Expediente </th>
                <td mat-cell *matCellDef="let dato"> {{dato.no_expediente}} </td>
            </ng-container>

            <!-- Columna NIT-->
            <ng-container matColumnDef="nit">
                <th mat-header-cell *matHeaderCellDef class="header-table">NIT </th>
                <td mat-cell *matCellDef="let dato"> {{dato.nit}} </td>
            </ng-container>

            <!-- Columna Numero soporte-->
            <ng-container matColumnDef="no_soporte">
                <th mat-header-cell *matHeaderCellDef class="header-table">Numero Soporte </th>
                <td mat-cell *matCellDef="let dato"> {{dato.no_soporte}} </td>
            </ng-container>

            <!-- Columna tipo solicitud-->
            <ng-container matColumnDef="tipo_solicitud">
                <th mat-header-cell *matHeaderCellDef class="header-table">Tipo de Solicitud </th>
                <td mat-cell *matCellDef="let dato"> {{dato.tipo_solicitud}} </td>
            </ng-container>

            <!-- Columna Usuario-->
            <ng-container matColumnDef="usuario">
                <th mat-header-cell *matHeaderCellDef class="header-table">Usuario asignacion </th>
                <td mat-cell *matCellDef="let dato"> {{dato.usuario}} </td>
            </ng-container>

            <!-- Columna Estado-->
            <ng-container matColumnDef="estado">
                <th mat-header-cell *matHeaderCellDef class="header-table">Estado solicitud </th>
                <td mat-cell *matCellDef="let dato"> {{dato.estado}} </td>
            </ng-container>

            <!-- Columna Fecha creacion-->
            <ng-container matColumnDef="fecha_creacion">
                <th mat-header-cell *matHeaderCellDef class="header-table">Fecha creacion </th>
                <td mat-cell *matCellDef="let dato"> {{dato.fecha_creacion}} </td>
            </ng-container>

            <!-- Columna Catnidad de muestras-->
            <ng-container matColumnDef="cantidad_de_muestras">
                <th mat-header-cell *matHeaderCellDef class="header-table">Cantidad de muestras </th>
                <td mat-cell *matCellDef="let dato"> {{dato.cantidad_de_muestras}} </td>
            </ng-container>

            <!-- Columna dias_de_items-->
            <ng-container matColumnDef="dias_de_items">
                <th mat-header-cell *matHeaderCellDef class="header-table">Cantidad de items </th>
                <td mat-cell *matCellDef="let dato"> {{dato.dias_de_items}} </td>
            </ng-container>

            <!-- Columna Cantidad documentos-->
            <!--ng-container matColumnDef="documentos">
                <th mat-header-cell *matHeaderCellDef class="header-table">Cantidad de documentos</th>
                <td mat-cell *matCellDef="let dato"> {{dato.dias_de_items}} </td>
            </ng-container-->

            <!-- Columna dias vencimiento-->
            <ng-container matColumnDef="dias_vencimiento">
                <th mat-header-cell *matHeaderCellDef class="header-table">Dias de vencimiento </th>
                <td mat-cell *matCellDef="let dato"> {{dato.dias_vencimiento}} </td>
            </ng-container>

            <form [formGroup]="accionesFormGroup">
                <!-- Columna Accion-->
                <ng-container matColumnDef="accion">
                    <th mat-header-cell *matHeaderCellDef class="header-table">Accion</th>
                    <td mat-cell *matCellDef="let dato"> 
                        <mat-form-field appearance="fill" >
                            <mat-label>Seleccione una opcion</mat-label>
                            <mat-select (ngModelChange)="ejecutarAccion(dato)" formControlName="opcionFormControl"> 
                            <mat-option *ngIf="dato.codigo_estado === 10" [value]="'1'">
                                Analisis
                            </mat-option>
                            <mat-option *ngIf="dato.codigo_estado === 10" [value]="'2'">
                                Rechazado
                            </mat-option>
                            <mat-option *ngIf="dato.codigo_estado === 11" [value]="'4'">
                                Revision
                            </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </td>
                </ng-container>
            </form>
            
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
        <mat-paginator [pageSizeOptions]="[15]" showFirstLastButtons></mat-paginator>
    </div>
</div>